<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#111310" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="MTG Deck" />
    <title>MTG Deck Builder</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="bg-orbit"></div>
    <header class="app-header">
      <div class="brand">
        <div class="brand-mark">MB</div>
        <div>
          <p class="brand-eyebrow">MTG Deck Builder</p>
          <h1>デッキ構築を、静かに研ぎ澄ます。</h1>
        </div>
      </div>
      <div class="header-actions">
        <button class="ghost">PWAインストール</button>
        <button class="primary">新規デッキ</button>
      </div>
    </header>

    <main class="layout">
      <section class="card panel search" aria-labelledby="search-title">
        <div class="panel-head">
          <h2 id="search-title">カード検索</h2>
          <p>英語/日本語どちらでも検索可能。結果は自動的に日本語優先表示。</p>
        </div>
        <div class="search-bar">
          <input id="search-input" type="search" placeholder="カード名を入力 (例: Lightning Bolt / 稲妻)" />
          <button class="primary" id="search-button">検索</button>
        </div>
        <div class="format-bar">
          <label>
            フォーマット
            <select id="format-select">
              <option value="all">制限なし</option>
              <option value="standard">スタンダード</option>
              <option value="modern">モダン</option>
              <option value="pioneer">パイオニア</option>
              <option value="legacy">レガシー</option>
              <option value="vintage">ヴィンテージ</option>
              <option value="pauper">パウパー</option>
              <option value="commander">統率者戦</option>
              <option value="historic">ヒストリック</option>
              <option value="alchemy">アルケミー</option>
              <option value="explorer">エクスプローラー</option>
              <option value="timeless">タイムレス</option>
            </select>
          </label>
        </div>
        <div class="search-filters">
          <span class="chip active">すべて</span>
          <span class="chip">クリーチャー</span>
          <span class="chip">呪文</span>
          <span class="chip">土地</span>
          <span class="chip">アーティファクト</span>
        </div>
        <div class="search-results" id="search-results">
          <article class="result-card">
            <div class="thumb"></div>
            <div>
              <h3>稲妻</h3>
              <p>Lightning Bolt · インスタント</p>
              <div class="meta">
                <span>{R}</span>
                <span>CMC 1</span>
                <span>Set: M10</span>
              </div>
            </div>
            <button class="ghost">+ メイン</button>
          </article>
          <article class="result-card">
            <div class="thumb alt"></div>
            <div>
              <h3>思考囲い</h3>
              <p>Thoughtseize · ソーサリー</p>
              <div class="meta">
                <span>{B}</span>
                <span>CMC 1</span>
                <span>Set: THS</span>
              </div>
            </div>
            <button class="ghost">+ サイド</button>
          </article>
          <article class="result-card">
            <div class="thumb land"></div>
            <div>
              <h3>島</h3>
              <p>Island · 基本土地 — 島</p>
              <div class="meta">
                <span>土地</span>
                <span>Unlimited</span>
              </div>
            </div>
            <button class="ghost">+ メイン</button>
          </article>
        </div>
      </section>

      <section class="card panel deck" aria-labelledby="deck-title">
        <div class="panel-head">
          <h2 id="deck-title">デッキリスト</h2>
          <div class="toggle">
            <button class="active">Main</button>
            <button>Side</button>
          </div>
        </div>
        <div class="deck-controls">
          <div class="sort">
            <button class="ghost">CMC</button>
            <button class="ghost active">名前</button>
            <button class="ghost">タイプ</button>
          </div>
          <button class="danger" id="deck-clear">デッキクリア</button>
        </div>
        <div class="format-note" id="format-note">フォーマット制限: なし</div>
        <div class="deck-list" id="deck-list">
          <div class="deck-row">
            <div>
              <h4>稲妻</h4>
              <p>インスタント · CMC 1</p>
            </div>
            <div class="count">
              <button>-</button>
              <span>4</span>
              <button>+</button>
              <button class="icon">✕</button>
            </div>
          </div>
          <div class="deck-row">
            <div>
              <h4>思考囲い</h4>
              <p>ソーサリー · CMC 1</p>
            </div>
            <div class="count">
              <button>-</button>
              <span>2</span>
              <button>+</button>
              <button class="icon">✕</button>
            </div>
          </div>
          <div class="deck-row">
            <div>
              <h4>島</h4>
              <p>基本土地</p>
            </div>
            <div class="count">
              <button>-</button>
              <span>10</span>
              <button>+</button>
              <button class="icon">✕</button>
            </div>
          </div>
        </div>
      </section>

      <section class="card panel stats" aria-labelledby="stats-title">
        <div class="panel-head">
          <h2 id="stats-title">統計 & 分析</h2>
          <p>デッキの構成を可視化。色配分とマナカーブを確認。</p>
        </div>
        <div class="stats-grid">
          <div class="stat">
            <h3>総枚数</h3>
            <p id="stat-total">60</p>
          </div>
          <div class="stat">
            <h3>クリーチャー</h3>
            <p id="stat-creature">18</p>
          </div>
          <div class="stat">
            <h3>呪文</h3>
            <p id="stat-spell">22</p>
          </div>
          <div class="stat">
            <h3>土地</h3>
            <p id="stat-land">20</p>
          </div>
          <div class="stat wide">
            <h3>平均CMC</h3>
            <p id="stat-cmc">2.4</p>
          </div>
        </div>
        <div class="charts">
          <div class="chart">
            <h4>マナカーブ</h4>
            <div class="bars">
              <span style="height: 30%">1</span>
              <span style="height: 60%">2</span>
              <span style="height: 45%">3</span>
              <span style="height: 20%">4</span>
              <span style="height: 10%">5+</span>
            </div>
          </div>
          <div class="chart">
            <h4>色分布</h4>
            <div class="color-ring">
              <span data-color="W" style="--slice: 25"></span>
              <span data-color="U" style="--slice: 30"></span>
              <span data-color="B" style="--slice: 15"></span>
              <span data-color="R" style="--slice: 20"></span>
              <span data-color="G" style="--slice: 10"></span>
            </div>
            <div class="legend">
              <span class="legend-item"><i class="w"></i>白 25%</span>
              <span class="legend-item"><i class="u"></i>青 30%</span>
              <span class="legend-item"><i class="b"></i>黒 15%</span>
              <span class="legend-item"><i class="r"></i>赤 20%</span>
              <span class="legend-item"><i class="g"></i>緑 10%</span>
            </div>
          </div>
        </div>
      </section>

      <section class="card panel io" aria-labelledby="io-title">
        <div class="panel-head">
          <h2 id="io-title">インポート / エクスポート</h2>
          <p>テキスト取り込み、Arena形式やPDF出力に対応。</p>
        </div>
        <div class="io-grid">
          <div class="io-box">
            <h3>インポート</h3>
            <p>.txt / Arena / MO 形式対応</p>
            <div class="dict-box">
              <label>
                Wisdom Guild 辞書URL
                <input
                  id="dict-url"
                  type="text"
                  placeholder="辞書のダウンロードURLを貼り付け"
                />
              </label>
              <label>
                辞書の文字コード
                <select id="dict-encoding">
                  <option value="shift_jis" selected>Shift_JIS (推奨)</option>
                  <option value="cp932">CP932</option>
                  <option value="utf-8">UTF-8</option>
                </select>
              </label>
              <div class="dict-actions">
                <button class="ghost" id="dict-fetch">辞書を取得</button>
                <label class="ghost dict-file">
                  辞書ファイルを選択
                  <input id="dict-file" type="file" accept=".txt,.dic,.csv" />
                </label>
              </div>
              <div class="dict-status" id="dict-status">
                辞書未読み込み
              </div>
            </div>
            <input id="import-file" type="file" accept=".txt" />
            <button class="primary" id="import-run">インポート実行</button>
            <div class="progress" aria-label="インポート進捗">
              <span id="import-progress" style="width: 0%"></span>
            </div>
            <div class="import-summary" id="import-summary">
              未実行
            </div>
          </div>
          <div class="io-box">
            <h3>エクスポート</h3>
            <p>用途に合わせて形式を選択</p>
            <div class="pdf-settings">
              <label>
                プレイヤー名
                <input id="pdf-player" type="text" placeholder="例: 井上" />
              </label>
              <label>
                日付
                <input id="pdf-date" type="date" />
              </label>
            </div>
            <div class="export-actions">
              <button class="ghost">Arena形式</button>
              <button class="ghost">日本語形式</button>
              <button class="ghost">タイプ別</button>
              <button class="ghost">.txt保存</button>
              <button class="primary" id="export-pdf">PDF出力</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <section class="print-sheet" aria-hidden="true">
      <header class="print-header">
        <div class="print-meta-left">
          <p class="print-date" id="print-date">2026/02/01 20:50</p>
          <h1>MTG デッキリスト</h1>
        </div>
        <div class="print-meta-right">
          <p>MTG デッキリスト作成 | Magic: The Gathering Deck Builder</p>
          <p class="print-player">プレイヤー: <span id="print-player">-</span>　作成日: <span id="print-day">2026-02-01</span></p>
        </div>
      </header>
      <div class="print-summary">
        <span>メイン: <strong id="print-main-count">0</strong>枚</span>
        <span>サイド: <strong id="print-side-count">0</strong>枚</span>
        <span>クリーチャー: <strong id="print-creature-count">0</strong></span>
        <span>土地: <strong id="print-land-count">0</strong></span>
      </div>
      <section class="print-section">
        <h2>メインボード</h2>
        <div class="print-list" id="print-main-list"></div>
      </section>
      <section class="print-section">
        <h2>サイドボード</h2>
        <div class="print-list" id="print-side-list"></div>
      </section>
      <footer class="print-footer">
        Generated by MTG Decklist Builder
      </footer>
    </section>

    <footer class="app-footer">
      <p>© 2026 MTG Deck Builder · Powered by Scryfall API</p>
    </footer>

    <div class="toast show">カードをメインボードに追加しました。</div>

    <script src="app.js"></script>
  </body>
</html>
